function startQuiz(e,t){isTutorialOn&&(answerTimes=e.Pool.Answers);for(var s=e.Quiz,i=$("#quiz_box"),o=IREP.getTimestamp(),n=o,a=0;a<s.Questions.length;++a){i.append("<div class='question' id='Question"+a+"'>"),$quizitem=$("#Question"+a);var r=s.Questions[a],u=$("<h2/>",{html:r.QuestionText});$quizitem.append(u);for(var d=$('<div class="answers">'),l=0;l<r.Answers.length;++l){var c=$("<div/>",{class:"table"}),m=r.Answers[l],p=$("<div/>",{html:m.AnswerText,class:"col",data:{questionId:r.QuestionId,answerId:m.AnswerId}});c.append(p),d.append(c)}d.one("click",".col",function(){var i=$(this);$answerblock.addClass("answered"),$answerblock=$answerblock.next().next(),i.addClass("selected"),$parentquestion=i.closest(".question"),$parentquestion.fadeOut(250),setTimeout(function(){$parentquestion.next().show()},250);var o=i.data("questionId"),a=i.data("answerId");answers.push({questionId:o,answerId:a});var r=Math.round(IREP.getTimestamp()-n,0);n=IREP.getTimestamp(),s.AuditUID.length>0&&IREP.callApi({url:"/quiz/audit/answer",type:"POST",data:{auditUID:s.AuditUID,answerID:a,answerTime:r}}),answers.length===s.Questions.length&&(stopcount=!1,$("#loadmessage").html(localeText[187517]),$("#loader").show(),$(".quiz").hide(),$("#quiz_box #TopBar #timer span").html(":60"),$(".quizsummary").hide(),e.Seconds=maxTime-secondsLeft,t.server.postPlay(IREP.user().currentUID,e,answers).done(function(e){quizcompleted(t,IREP.user().currentUID,e)}))}),$quizitem.append(d)}if($(".question:first").show(),stopcount=!0,isTutorialOn){if(3===tutorialStep){tutorialplay=e,tutorialhub=t;var h=-(.95*($("#quiz_box").outerHeight(!0)-$("#TopBar").outerHeight(!0)));teach($("#quiz_box"),h,0,tutorialStep)}tutorialStep>5&&($(".answers").css({"z-index":1e3,position:"relative"}),o=IREP.getTimestamp(),n=o,timer(e,t))}else o=IREP.getTimestamp(),n=o,timer(e,t)}function timer(e,t){function s(e,t){if($("#countdown").css("width",e+"%"),secondsLeft=Math.floor(6e4-t)>9?Math.floor(6e4-t):Math.floor(6e4-t),console.log(secondsLeft),secondsLeft>=0&&$("#quiz_box #TopBar #timer span").html(":"+Math.round(secondsLeft/1e3)),isTutorialOn)for(var s=0;s<5;s++)t>12e3*(s+1)&&$("#rightside div").eq(s).addClass("answered")}function i(){var a=new Date,r=a.getTime()-o.getTime(),u=Math.round(r/maxTime*100);if(u<=99&&stopcount)s(u,r),setTimeout(i,n);else if(stopcount)return stopcount=!1,$("#loader").show(),$(".question").hide(),void t.server.postPlay(IREP.user().currentUID,e,answers).done(function(e){e.Result.Seconds=maxTime-secondsLeft,quizcompleted(t,IREP.user().currentUID,e)})}var o=new Date,n=Math.floor(maxTime/200);i()}var answers=[],stopcount=!1,$answerblock=$("#leftside div:first"),$answerblockright=$("#rightside div:first"),answerTimes,tutorialplay,tutorialhub,maxTime=6e4,secondsLeft=6e4;
function getQueryVariable(e){for(var a=window.location.search.substring(1),t=a.split("&"),s=0;s<t.length;s++){var i=t[s].split("=");if(decodeURIComponent(i[0])==e)return decodeURIComponent(i[1])}}function initialize(e,a){for(var t=1;t<=numberOfTutorialUsers;++t)$("#User"+t).addClass("tutorialUser");"de-DE"===$("html").attr("lang")&&$(".badge-progression-text").html("Fortschritt"),isPrc&&($(".separator").css("display","none"),$(".match-player-flag").css("opacity",0),$(".ChallengerFlag").css("opacity",0),$(".PlayerCountry").css("opacity",0),$(".OpponentMatchupCountry").css("opacity",0),$(".PublicLocation").css("display","none")),e.server.getUser(a).done(function(t){isTutorialOn=t.user.Wins+t.user.Losses<numberOfTutorialUsers,isTutorialOn&&isTutorialAllowed?tutorialStep=99:(tutorialStep=13,isTutorialOn=!1),playsLeft=t.plays,setUserData(t),getOpponents(e,a),getBadges(e,a),checkTutorialState()}),$(".SkipTutorial").click(function(){skipTutorial(e,a)})}function setUserData(e){readyToRender.isUserDataReady=!1,playsLeft=e.plays;var a=e.user.Wins+e.user.Losses,t=100*e.user.Wins/a+1;$(".PlayerCountry").html(e.user.PublicLocation),$(".Plays").html(a),$(".PlayerWins").html(e.user.Wins),$(".PlayerLosses").html(e.user.Losses),$(".winsvslosses .PlayerWins").css("width",t+"%"),$(".Rating").html(e.user.Score),$(".PlaysAvailable").data("plays",e.plays),$(".PlaysAvailable").html(localeText[185340].replace("[X]",e.plays)),readyToRender.isUserDataReady=!0}function getOpponents(e,a){function t(t){$(".Player").css("opacity",1);for(var s=9;s>t.length;s--)$("#User"+s).css("opacity",0);$(t).each(function(e){var a=$(this)[0],t=pathURLs[2]+a.Avatar,s=$("#User"+(e+1));s.data("User",a),s.find(".Avatar").html(a.Avatar),s.find(".Image>img").attr("src",t),s.find(".PublicName").html(a.PublicName),s.find(".PublicLocation").html(a.PublicLocation),s.find(".Score").html(a.Score),s.find(".Wins").html(a.Wins),s.find(".usercountryimage").attr("src",isPrc?"":"images/countries/"+a.CountryName.replace(/ /g,"")+".png")}),clickPlayer(e,a)}readyToRender.isOpponentDataReady=!1;var s;s=isTutorialOn?e.server.getTutorialUsers(a):e.server.getOpponents(a),s.done(function(e){t(e)}).done(function(){readyToRender.isOpponentDataReady=!0,render()})}function clickPlayer(e,a){$(".Player").click(function(){if(playsLeft<=0)return $("#startgame").css("background-color","rgba(134, 134, 134, .2)"),$("#startgame").find("div").css("color","rgba(255, 255, 255, .2)"),$("#startgame").off(),void noPlaysLeft();checkTutorialState(),readyToRender.isChallengerDataReady=!1,$(".Player").removeClass("SelectedOpponent");var t=$(this).data("User");img=pathURLs[2]+t.Avatar,$(".challengeravatar").attr("src",img),$(".OpponentMatchupName").html(t.PublicName),$(".OpponentMatchupCountry").html(t.PublicLocation),$("#OpponentWins").html(t.Wins),$("#OpponentPlays").html(t.Wins+t.Losses),$("#OpponentRating").html(t.Score),$("#OpponentRating").attr("src",t.Score),$(".OpponentMatchupFlag").attr("src",isPrc?"":"images/countries/"+t.CountryName.replace(/ /g,"")+".png"),$(".topsummary").addClass("light-highlight"),$(".botsummary").addClass("dark-highlight"),$(".match-player-mid-content").addClass("pregame"),$(".winner").removeClass("winner"),$(this).addClass("SelectedOpponent"),$("#startgame").off(),$("#startgame").one("click",function(){playsLeft>0&&(isTutorialOn&&($(".SelectedOpponent .tutorial-check").show(2e3),$(".SelectedOpponent").removeClass("tutorialUser1000").removeClass("tutorialUser").css("z-index",0),$(".selectedTutorialUser").removeClass("selectedTutorialUser")),$(".Player").removeClass("SelectedOpponent"),initiateQuiz(e,a,t))}),$("#cancel-gameplay").one("click",function(){$("#startgame").unbind(),$(".Player").removeClass("SelectedOpponent"),readyToRender.removeChallengerData=!0,render()}),readyToRender.isChallengerDataReady=!0,render()})}function getBadges(e,a){readyToRender.isBadgeDataReady=!1,badgeProgressRepo=[],e.server.getBadges(a).done(function(e){function a(e,a){var t=$('<div class="'+a+'-badge badge"></div>');t.data(e);var s=e.Earned||"match-badge-wrapper"===a?$('<img src="'+e.ColorImageURL+'"/>'):$('<img src="'+e.GrayscaleImageURL+'"/>');if(t.append(s),"badge-wrapper"===a||"match-badge-wrapper"===a){var i=$('<div class="Progress"></div>'),r=$('<div class="barcolor"></div>'),o="badge-wrapper"===a&&e.Earned||"match-badge-wrapper"===a&&e.BadgeProgressPercent>=100?$('<div class="ranknumber" style="display: block;"><div>'+e.LevelNumber+"</div></div>"):$('<div class="ranknumber" style="display: none;"><div></div></div>');r.css({width:(e.BadgeProgressPercent<=100?e.BadgeProgressPercent:100)+"%"}),i.append(r),t.append(i).append(o)}if("badge-wrapper"===a||"match-badge-wrapper"===a){var n=$('<div class="match-badge-footer"></div>'),d=$('<div class="numeric-badge-progress">'+e.badgewallprogress+"&nbsp;/</div>"),l=$('<div class="numeric-badge-total">&nbsp;'+e.BadgeTotal+"</div>");n.append(d).append(l),t.append(n)}"recent-badges"===a&&t.prop("id",Date.parse(e.EarnedDate)),$("#"+a).append(t)}function t(e){if(e.Earned&&(a(e,"recent-badges"),5===$("#recent-badges").find(".badge").length)){var t=[];$("#recent-badges").find("div").each(function(){t.push(parseInt($(this).prop("id"),10))}),Array.min=function(e){return Math.min.apply(Math,e)},$("#"+Array.min(t)).remove()}}function s(e){if(void 0!==badges)for(var a=0;a<badges.length;++a)e.Code===badges[a].Code&&(e.LevelNumber>badges[a].LevelNumber||e.BadgeProgressPercent>badges[a].BadgeProgressPercent)&&(badgeProgressRepo.push({progress:e.LevelNumber>badges[a].LevelNumber?100:e.BadgeProgressPercent-badges[a].BadgeProgressPercent,code:e.Code}),badgeProgressRepo.length>3&&badgeProgressRepo.sort(function(e,a){return parseFloat(a.progress)-parseFloat(e.progress)}))}function i(e){if($("#match-badge-wrapper").html(""),badgeProgressRepo.length)for(var t=0;t<(badgeProgressRepo.length>3?3:badgeProgressRepo.length);++t)for(var s=0;s<e.length;++s)badgeProgressRepo[t].code===e[s].Code&&a(e[s],"match-badge-wrapper")}$("#recent-badges").find("div").remove(),$("#badge-wrapper").html("");for(var r=0;r<e[0].Badges.length;r++)a(e[0].Badges[r],"badge-wrapper"),t(e[0].Badges[r]),s(e[0].Badges[r]);i(e[0].Badges),attachBadgeEvents(),badges=e[0].Badges}).done(function(){readyToRender.isBadgeDataReady=!0,render()})}function initiateQuiz(e,a,t){$answerblock=$("#leftside div:first"),$answerblockright=$("#rightside div:first"),$(".answered").removeClass("answered"),$(".Player").unbind(),$("#loader").css({height:$("html").css("height")}).fadeIn(500),e.server.initiateQuiz(a,t.Avatar,t.PlayerType,isMobile,navigator.userAgent).done(function(a){console.log(a),0==a.QuestionPoolId?($("#loader").fadeOut(500),noPlaysLeft()):(readyToRender.isQuizReady=!0,render(),setTimeout(function(){if(startQuiz(a,e),isTutorialOn)$("#backing").css({"z-index":999});else for(var t=a.Pool.Answers,s=0;s<t.length;s++)setTimeout(function(){$answerblockright.addClass("answered"),$answerblockright=$answerblockright.next().next()},t[s].MiliSeconds)},500))})}function quizcompleted(e,a,t){readyToRender.isQuizComplete=!1,e.server.getUser(a).done(function(s){setTimeout(function(){answers=[],stopcount=!1,$(".question").remove(),$(".answers").remove(),$(".match-player-mid-content").removeClass("pregame"),$(".correct").html(localeText[185337].replace("[X/X]",""+t.Result.Correct+"/5").replace("[time]",(t.Result.Seconds/1e3).toFixed(2))),$("#opponentinfo").find(".correct").html(localeText[185337].replace("[X/X]",""+t.Result.OpponentCorrect+"/5").replace("[time]",(t.Result.OpponentSeconds/1e3).toFixed(2)));var e=5===t.Result.Correct;randomFinishText(t.Result.Win,e),t.Result.Win?(readyToRender.isMatchWon=!0,$(".pointschange").html("+"+t.Result.ScoreChange),$(".won").css("display","block"),$(".lost").css("display","none"),$(".topsummary").removeClass("light-highlight"),$(".botsummary").removeClass("dark-highlight")):(readyToRender.isMatchWon=!1,$(".pointschange").html(t.Result.ScoreChange),$(".won").css("display","none"),$(".lost").css("display","block"),$("#opponentinfo > .topsummary").addClass("light-highlight"),$("#opponentinfo > .botsummary").addClass("dark-highlight")),$("#donereview").one("click",function(){checkTutorialState(),readyToRender.removePostQuizChallengerData=!0,render(),playsLeft<=0&&noPlaysLeft()}),checkTutorialState()},2e3),isTutorialOn&&0===$(".tutorialUser").length&&(isTutorialOn=!1,endTutorialMode()),setTimeout(function(){readyToRender.isQuizComplete=!0,setUserData(s),getOpponents(e,a),getBadges(e,a)},250),checkTutorialState()})}function randomFinishText(e,a){var t,s=[185328,185324,185325,185326,185327,185329],i=[185331,185332,185333,185334],r="";e?(a&&(r=localeText[s[0]]+"  "),t=(Math.random()*(s.length-1)|0)+1,r+=localeText[s[t]]):(t=Math.random()*i.length|0,r=localeText[i[t]]),$(".match-end-message").html(r)}function render(){function e(e){$(e).find(".Rating, .Plays, .PlayerWins, .PlayerLosses").each(function(){var e=$(this),a=parseInt(e.html());e.html(0),jQuery({Counter:e.html()}).animate({Counter:a},{duration:2e3,easing:"swing",step:function(){e.text(Math.ceil(this.Counter))}})})}readyToRender.isUserDataReady&&readyToRender.isOpponentDataReady&&readyToRender.isBadgeDataReady&&!readyToRender.isQuizComplete&&(isMobile?$("#player-header").hide(0):$("#mobile-header").hide(0),$("#info, #dashboard, #challenge, #quiz_box").hide(0),$("#dashboard-wrapper, #recent-badges, #badge-progress, #match-badge-progress").hide(0),$("#show-badges-button").hide(0),$(".Player, .badge").hide(0),$(".quizsummary, .quiz, #quiz_matchup").hide(0),loadHtmlLocale(),processLanguageExceptions(),$("#loadmessage").html("<span>"+localeText[185302]+"</span>"),$("#loader").fadeOut(500,function(){isTutorialOn?($("#show-badges-button").hide(),$("#StartTutorial").css({"z-index":1e3,position:"relative"}),$("#container").fadeIn(500,function(){isMobile?($("#mobile-player-widget-wrapper").css("height",parseInt($("#mobile-player-widget-bottomhalf").css("height"))+15+"px"),99!==tutorialStep?($("#mobile-header").fadeIn(500,function(){e($("#mobile-header"))}),$("#dashboard").show(),$("#challenge").fadeIn(500,function(){$("#headingbar").show(300);for(var e=1;e<=numberOfTutorialUsers;++e)$("#User"+e).show(400+100*e)})):($("#info").find(".wrapper").css({position:"relative","z-index":1e3}),$("#info").fadeIn(500))):($("#player-header-wrapper").css("height",$("#player-header-bottomhalf").css("height")),$("#player-header").fadeIn(500,function(){e($("#player-header"))}),$("#dashboard").show(),$("#backing").css("display","block"),$("#info").fadeIn(500),$("#challenge").fadeIn(500,function(){$("#headingbar").show(300);for(var e=1;e<=numberOfTutorialUsers;++e)$("#User"+e).show(400+100*e)}))})):$("#container").fadeIn(500,function(){isMobile?($("#mobile-player-widget-wrapper").css("height",parseInt($("#mobile-player-widget-bottomhalf").css("height"))+15+"px"),$("#mobile-header").fadeIn(500,function(){e($("#mobile-header")),$("#show-badges-button").show(500)}),$("#dashboard-wrapper").show(0),$(".badge").each(function(e){$this=$(this),$this.show(0)})):($("#player-header-wrapper").css("height",$("#player-header-bottomhalf").css("height")),$("#player-header").fadeIn(500,function(){e($("#player-header"))}),$("#dashboard-wrapper").show(0),$("#badge-progress").show(0),$(".badge").each(function(e){$this=$(this),$this.show(0);var a=parseInt($this.find(".barcolor").css("width"));$this.find(".barcolor").css("width",0),$this.find(".barcolor").animate({width:a+"%"},1500)}),4===$("#recent-badges .badge").length&&$("#recent-badges").show(0),$("#dashboard").fadeIn(500)),$("#challenge").show(500,function(){$("#headingbar").show(300);for(var e=1;e<=$(".Player").length;++e)$("#User"+e).show(400+100*e)})})}),readyToRender.isUserDataReady=!1,readyToRender.isBadgeDataReady=!1,readyToRender.isOpponentDataReady=!1),readyToRender.isChallengerDataReady&&($(".nonquiz").hide(),$("#quiz_matchup").fadeIn(500),$(".quizmatchup").fadeIn(500),isMobile?($("#dashboard").show(),$("#challenge").hide(),$(".spacer").hide()):$(".spacer").show(),isTutorialOn||(location.href="#body"),readyToRender.isChallengerDataReady=!1),readyToRender.removeChallengerData&&($(".quizmatchup").hide(),$(".quizsummary").hide(),$("#dashboard-wrapper").show(0,function(){$("#dashboard-wrapper").fadeIn(500,function(){isTutorialOn||($("#badge-progress").show(0),$("#badge-wrapper").show(0),4===$("#recent-badges .badge").length&&$("#recent-badges .badge").show(0))})}),isMobile&&($(".nonquiz").show(),$("#dashboard").hide(),$("#badge-progress").hide(),$("#recent-badges").hide(),$("#challenge").fadeIn(500)),$("#quiz_matchup").hide(),readyToRender.removeChallengerData=!1),readyToRender.isQuizReady&&($("#container").fadeOut(500,function(){$(".quiz").fadeIn(1e3,function(){$("#loader").fadeOut(500)})}),isTutorialOn&&$("#info").hide(),readyToRender.isQuizReady=!1),readyToRender.isQuizComplete&&readyToRender.isUserDataReady&&readyToRender.isOpponentDataReady&&readyToRender.isBadgeDataReady&&($("#loader").fadeOut(1e3,function(){if($(".quizsummary").show(0),$(".quizmatchup").hide(0),$("#quiz_box").hide(0),$("#container").fadeIn(500,function(){!$("#match-badge-wrapper .badge").length||isTutorialOn||hideBadges?$("#match-badge-progress, #match-badge-wrapper").hide(0):($("#match-badge-progress").show(0),$("#match-badge-wrapper").show(0,function(){$(".match-badge-wrapper-badge").each(function(e){$this=$(this);var a=parseInt($this.find(".barcolor").css("width"));$this.find(".barcolor").css("width",0),$this.find(".barcolor").animate({width:a+"%"},1500)})}))}),isTutorialOn)$("#info").hide();else for(var e=1;e<=$(".Player").length;++e)$("#User"+e).show(400+100*e);hideBadges&&(hideBadges=!1)}),readyToRender.isQuizComplete=!1),readyToRender.removePostQuizChallengerData&&($("#quiz_matchup").hide(),isTutorialOn?$("#info").hide():isMobile?$("#show-badges-button").show():($("#badge-progress").show(),4===$("#recent-badges").length&&$("#recent-badges").show()),$("#dashboard-wrapper").show(0),readyToRender.removePostQuizChallengerData=!1),setTimeout(function(){$("#shade").css("height",$("html").css("height")),$("#backing").css("height",$("html").css("height")),$("body").focus()},1e3)}function checkTutorialState(){switch(tutorialStep){case-1:return;case 0:return void(tutorialStep=1);case 1:teach($("#dashboard"),0,0,tutorialStep);break;case 2:teach($("#quiz_matchup"),-391,0,tutorialStep);break;case 3:break;case 4:teach($("#quiz_matchup"),-367,0,tutorialStep);break;case 5:teach($("#dashboard"),0,0,tutorialStep);break;case 6:isTutorialOn&&($("#backing").css({display:"block",height:$("html").css("height")}),$("#info").remove());break;case 7:break;case 13:$(".tutorialUser").removeClass("tutorialUser"),tutorialStep=-1}}function teach(e,a,t,s){$("#shade").css({display:"block",opacity:.6,height:$("html").css("height")}).fadeIn(300,function(){$("#tutorialheader span").html(localeText[tutorialHeader[s-1]]),$("#tutorialcontent #messageContent").html(localeText[tutorial[s-1]]),$("#tutorialheader").css("z-index",9999),$("#tutorialclose").css("z-index",9999),$("#tutorialclose img").addClass("animated bounceIn").addClass("animated infinite").css({"animation-duration":"2.5s","z-index":9999});var i=$("#tutorialmessage");switch($("#backing").css({display:"block",height:$("html").css("height")}),e.css("position","relative"),i.css({opacity:1,"z-index":9999,top:a,left:t,display:"block"}),0===t&&i.css({margin:"auto"}),e.append(i),tutorialStep){case 1:for(var r=1;r<=numberOfTutorialUsers;r++)$("#User"+r).addClass("tutorialUser891");$("#User"+startingTutorialUserIndex).addClass("SelectedOpponent");break;case 3:$("#countdown").css("width","10%");for(var r=1;r<=numberOfTutorialUsers;r++)$("#User"+r).addClass("tutorialUser0");break;case 5:for(var r=1;r<=numberOfTutorialUsers;r++)r!==startingTutorialUserIndex&&$("#User"+r).addClass("tutorialUser891").removeClass("tutorialUser0")}"none"!==$("#shade").css("display")&&$("#shade").css({height:$("html").css("height")}),"none"!==$("#backing").css("display")&&$("#backing").css({height:$("html").css("height")})})}function unshade(){$("#shade").css("opacity",0).fadeOut(300,function(){hideMessage()})}function hideMessage(){$("#tutorialmessage").css({opacity:0,"z-index":-1}),$("#tutorialheader").css("z-index",-1),$("#tutorialclose").css("z-index",-1),$("#tutorialmessage").css("display","none")}function endTutorialMode(){0===$(".tutorialUser1000").length&&($(".tutorial-check").remove(),$("#tutorialclose img").removeClass("animated bounceIn"),$("#tutorialclose img").removeClass("animated infinite"),$("div").removeClass("animated infinite"),$("#startgame").css({"z-index":0}),$(".answers").css({"z-index":0}),$("#donereview").css({"z-index":0}),$("#getstarted").css({"z-index":0}),$("#backing").css("display","none"),unshade(),$("#exit").css("z-index","0"),hideBadges=!0,isTutorialOn=!1)}function skipTutorial(e,a){isTutorialAllowed=!1,$("#container").hide(),console.log("working"),$("#loader").fadeIn(250,function(){$(".Player").removeClass("SelectedOpponent").removeClass("tutorialUser").removeClass("tutorialUser891").removeClass("tutorialUser1000").removeClass("selectedTutorialUser").addClass("tutorialUser0"),endTutorialMode(),$(".Player").removeClass("tutorialUser0"),initialize(e,a)})}function noPlaysLeft(){$("#startgame").css("background-color","rgba(134, 134, 134, .2)"),$("#startgame").find("div").css("color","rgba(255, 255, 255, .2)"),$("#startgame").off(),$("#shade").css({display:"block",opacity:.6,height:$("html").css("height")}).fadeIn(300,function(){$("#tutorialheader span").html(localeText[185368]),$("#tutorialcontent").html(localeText[187556]),$("#tutorialheader").css("z-index",9999),$("#tutorialclose").css("z-index",9999),processLanguageExceptions();var e=$("#tutorialmessage");e.css({opacity:1,"z-index":9999,top:100,left:0,display:"block"}),$("#backing").prepend(e),$("#backing").css({display:"block",opacity:1,height:$("html").css("height")})})}function attachBadgeEvents(){function e(){$(".badge-tooltip").css({left:i+r,top:s.top,transform:"translate(-50%, 0)"})}function a(e){s=e.position(),s.left+=parseInt(e.css("width"))/2,s.top+=isMobile?55:70,i=parseInt(e.parent().css("width"))/2,r=(s.left-i)/2}function t(e){var a=$("<div></div>");a.addClass("badge-tooltip"),a.html('<div class="badge-tooltip-topsection">   <div class="badge-tooltip-title">'+e.data("Title").slice(localeText[185299].length+2).replace("160;:","").replace("Edge Arena:","").replace("Edge Arena :","").replace("Edge Arena：","")+'</div>   <div class="badge-tooltip-description">'+e.data("Description")+'</div>   <div class="badge-tooltip-highest">'+localeText[185466]+"&nbsp;<span>"+e.data("BadgeProgress")+'</span></div></div><div class="badge-tooltip-bottomsection">   <div class="badge-tooltip-progress">       <div class="badge-tooltip-barcolor"></div>   <div class="badge-tooltip-bottomtext"><span>'+e.data("BadgeProgress")+'</span>/<span class="badge-tooltip-Total">'+e.data("BadgeTotal")+"</span></div></div>"),e.parent().append(a);var t=$(".badge-tooltip-description").html();return $(".badge-tooltip-description").html(t.replace("[X]",e.data("BadgeTotal"))),a.find(".badge-tooltip-barcolor").animate({width:(e.data("BadgeProgressPercent")<=100?e.data("BadgeProgressPercent"):100)+"%"},500),a.bind("click",function(){$(".badge-tooltip").remove()}),a}$("body").bind("click",".badge",function(s){if(s.cancelBubble=!0,s.stopPropagation&&s.stopPropagation(),!$(s.target).hasClass("badge-tooltip")){$(".badge-tooltip").remove();var i=$(s.target).hasClass("badge")?$(s.target):$(s.target).parent().hasClass("badge")?$(s.target).parent(".badge"):"non-badge";"non-badge"!==i&&(a(i),t(i),e())}});var s,i,r}function processLanguageExceptions(){switch($("html").attr("lang")){case"de-DE":isMobile&&($(".badge-progression-text").html("Fortschritt"),$("#tutorialmessage").css({width:"90%"}),$("#tutorialheader").css({padding:"8px 65px 8px 14px"}));break;case"fi-FI":isMobile&&$(".badge-progression-text").css("font-size","16px");break;case"cs-CZ":isMobile&&$("#tutorialmessage").css({width:"90%"});break;case"el-GR":isMobile&&$("#tutorialheader").css({padding:"18px 0 18px 9px","font-size":"15px"});break;case"es-ES":isMobile&&$("#tutorialheader").css({padding:"18px 0 18px 9px","font-size":"15px"});break;case"fr-FR":isMobile&&($("#tutorialmessage").css({width:"90%"}),$("#tutorialheader").css({padding:"8px 65px 8px 14px"}));break;case"hu-HU":isMobile&&($("#tutorialmessage").css({width:"90%"}),$("#tutorialheader").css({padding:"18px 0 18px 9px","font-size":"15px"}));break;case"id-ID":isMobile&&$("#tutorialheader").css({padding:"18px 0 18px 9px"});break;case"ja-JP":isMobile&&($("#tutorialmessage").css({width:"95%"}),$("#tutorialheader").css({padding:"18px 40px 18px 8px","font-size":"14px"}),$("#tutorialclose-wrapper").css({right:0}),$("#tutorialclose").css({height:"40px",width:"40px"}),$("#tutorialclose img").css({height:"15px",width:"15px",right:6,top:6}));break;case"ko-KR":isMobile&&($("#tutorialmessage").css({width:"96%"}),$("#tutorialheader").css({padding:"18px 0 18px 9px","font-size":"14px"}));break;case"nl-NL":isMobile&&($("#tutorialmessage").css({width:"85%"}),$("#tutorialheader").css({padding:"18px 0 18px 9px","font-size":"15px"}));break;case"ro-RO":isMobile&&($("#tutorialmessage").css({width:"86%"}),$("#tutorialheader").css({padding:"18px 40px 18px 8px","font-size":"14px"}),$("#tutorialclose-wrapper").css({right:0}),$("#tutorialclose").css({height:"40px",width:"40px"}),$("#tutorialclose img").css({height:"15px",width:"15px",right:6,top:6}));break;case"sv-SE":isMobile&&$("#tutorialheader").css({padding:"18px 0 18px 9px"});break;case"th-TH":isMobile&&($("#tutorialmessage").css({width:"90%"}),$("#tutorialheader").css({padding:"18px 0 18px 9px","font-size":"15px"}));case"tr-TR":isMobile&&$("#tutorialheader").css({padding:"18px 0 18px 9px"})}}var isPrc="retailedgecn.intel.com"==window.location.origin,paxUid=getQueryVariable("paxuid"),authDeferred=null;void 0==paxUid&&(window.location.href=window.location.origin+"/50/asmo/edgearena");var IREP={options:{httpApi:window.location.origin+"/api",httpsApi:window.location.origin+"/api"},user:function(){return{currentUID:paxUid}},callApi:function(e){e=$.extend({},{type:"GET",secure:!1,anonymous:!1,data:{},headers:{}},e);var a=$.extend({},{PaxUID:e.anonymous?"":IREP.user().currentUID},e.headers),t=$.ajax({dataType:"json",url:e.secure?this.options.httpsApi+e.url:this.options.httpApi+e.url,contentType:"application/json",type:e.type,headers:a,data:"GET"===e.type?e.data:JSON.stringify(e.data)});return t.promise()},getTimestamp:function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():(new Date).getTime()}},localeText=null;getLocaleText=function(){function e(e){var t=$.Deferred();return null==a?authDeferred.done(function(s){null==a&&(a=IREP.callApi({url:"/localization/module",data:{code:"201705game-EdgeArenaInGame",cultureCode:s.userData.cultureCode}}).done(function(e){localeText=e.localeText}).done(function(a){IREP.callApi({url:"/localization/module",data:{code:"201709game-EAUpdatedPromoCopy",cultureCode:s.userData.cultureCode}}).done(function(e){for(var a in e.localeText)e.localeText.hasOwnProperty(a)&&(localeText[a]=e.localeText[a])}).done(function(){t.resolve(a.localeText[e])})}))}):a.done(function(a){t.resolve(a.localeText[e])}),t.promise()}var a=null;return e}(),loadHtmlLocale=function(){var e=$.Deferred();return $("[data-localeid]").each(function(a,t){var s=$(this).data("localeid");getLocaleText(s).done(function(e){$(t).html(e)}).done(function(){e.resolve()})}),e.promise()},function(){function e(e){return e.split("?")[0]}window.history.pushState("page2","Title",e(window.location.href));var a,t=["/api/participant/avatar/","/50/signalr/js","/api/participant/avatar/"];authDeferred=IREP.callApi({url:"/auth/login",type:"POST",data:{paxuid:paxUid}}).done(function(e){if(void 0===e)return void(window.location.href=window.location.origin+"/50/asmo/edgearena");a=e.userData,$("html").attr("lang",a.cultureCode),$(".PlayerName").html(a.firstName+" "+a.lastName),$(".playeravatar").attr("src",t[0]+a.publicUID),IREP.callApi({type:"POST",url:"/tracker",data:{code:"EdgeArena",type:"Launch",label:""}});var s=document.createElement("link");s.setAttribute("type","text/css"),s.setAttribute("rel","stylesheet"),s.setAttribute("id","Updated-CSS-In-Lang"),s.setAttribute("href","css/fonts_"+a.cultureCode+".css?v="),jQuery("head")[0].appendChild(s),loadHtmlLocale().done(function(){window.frameElement||$.getScript("//"+window.location.host+t[1].replace("stg","prod"),function(){"retailedge.intel.com"==window.location.host&&($.connection.hub.url="https://retailedge-prod.intel.com/50/signalr");var e=$.connection.triviaGameHub;e.client.connected=function(e,a){},e.client.disconnected=function(e,a){},$.connection.hub.qs={paxuid:paxUid},$.connection.hub.start().done(function(){initialize(e,paxUid)})})})})}();var readyToRender={isUserDataReady:!1,isOpponentDataReady:!1,isBadgeDataReady:!1,isChallengerDataReady:!1,removeChallengerData:!1,isQuizReady:!1,isQuizComplete:!1,removePostQuizChallengerData:!1,isLocaleTextReady:!1,isMatchWon:!0},badgeProgressRepo=[],badges,isMobile=!($(window).width()>=800),isTutorialOn,isTutorialAllowed=!0,tutorialStep=0,hideBadges=!1,playsLeft=0,numberOfTutorialUsers=3,startingTutorialUserIndex=3;$("#show-badges-button").click(function(){$("#show-badges-button").hide(),$("#dashboard, #badge-progress").show()}),$("#badge-progress-header").click(function(){isMobile&&($("#show-badges-button").show(),$("#dashboard, #badge-progress").hide(),$("#recent-badges").hide())}),$(".exit").off().on("click",function(){$("#loadmessage").html(""),$("#loader").fadeIn(250,function(){$("#container").hide(0),isMobile?isPrc?window.location.href="https://retailedgecn.intel.com/mobile/#/cms/route/testlist?ctrlId=6051":window.location.href="https://retailedge.intel.com/mobile/#/cms/route/testlist?ctrlId=6051":isPrc?window.location.href="https://retailedgecn.intel.com/games/edgearena/index.html":window.location.href="https://retailedge.intel.com/games/edgearena/index.html"})}),$("#StartTutorial").click(function(){$("#info").hide(),tutorialStep=1,isMobile&&(readyToRender.isUserDataReady=!0,readyToRender.isOpponentDataReady=!0,readyToRender.isBadgeDataReady=!0,render()),checkTutorialState()});var tutorial=[185310,185312,185314,185316,185318],tutorialHeader=[185309,185311,185313,185315,185317];$("#tutorialclose").click(function(){switch($("#exit").css("border-radius","0 10px 10px 0"),tutorialStep){case-1:return $("#backing").css("display","none"),void unshade();case 1:$("#User"+startingTutorialUserIndex).addClass("tutorialUser1000").removeClass("tutorialUser891"),$("#User"+startingTutorialUserIndex+" .PlayerInfo").addClass("animated bounceIn").addClass("animated infinite").css({"animation-duration":"2.5s"}),$("#User"+startingTutorialUserIndex).click(function(){$("#User"+startingTutorialUserIndex+" .PlayerInfo").removeClass("animated bounceIn"),$("#User"+startingTutorialUserIndex+" .PlayerInfo").removeClass("animated infinite"),$("#User"+startingTutorialUserIndex+" .PlayerInfo").css({"animation-duration":"1s"})}),$("#backing").css({"background-color":"rgba(0, 0, 0, 0)",height:$("html").css("height")}),$("#shade").css({display:"block",opacity:.4,height:$("html").css("height")}),hideMessage();break;case 2:unshade(),$("#User"+startingTutorialUserIndex).addClass("tutorialUser0").removeClass("tutorialUser1000").removeClass("SelectedOpponent"),$("#startgame").css({"z-index":1e3,position:"relative"}),$("#startgame div").addClass("animated bounceIn").addClass("animated infinite").css({"animation-duration":"2.5s"}),$("#startgame").click(function(){$("#startgame div").removeClass("animated bounceIn"),$("#startgame div").removeClass("animated infinite")});break;case 3:$("#shade").css("opacity",0),hideMessage(),$(".answers").css({"z-index":1e3,position:"relative"}),timer(tutorialplay,tutorialhub);break;case 4:unshade(),$("#donereview").css({"z-index":1e3,position:"relative"}),$("#backing").css({"background-color":"rgba(0, 0, 0, 0)",height:$("html").css("height")}),$("#donereview div").addClass("animated bounceIn").addClass("animated infinite").css({"animation-duration":"2.5s"}),$("#donereview").click(function(){$("#donereview div").removeClass("animated bounceIn"),$("#donereview div").removeClass("animated infinite")});break;case 5:$("#backing").css({"background-color":"rgba(0, 0, 0, 0)",height:$("html").css("height")}),$("#shade").css({display:"block",opacity:.4,height:$("html").css("height")}),hideMessage();for(var e=1;e<=numberOfTutorialUsers;e++)e!==startingTutorialUserIndex&&$("#User"+e).addClass("tutorialUser1000").removeClass("tutorialUser891")}tutorialStep++,playsLeft<=0&&($("#backing").hide(),$("#shade").hide())}),$(".tutorialUser1000").click(function(){$(".selectedTutorialUser").addClass("tutorialUser1000").removeClass("selectedTutorialUser"),$(this).addClass("SelectedOpponent").addClass("selectedTutorialUser").removeClass("tutorialUser1000")});var pathURLs=["/api/participant/avatar/","/50/signalr/js","/api/participant/avatar/"];